<% if (messages.error) { %>
    <p style="color:red"><%- messages.error %></p>
<% } %>
<% if (messages.success) { %>
    <p style="color:green"><%- messages.success %></p>
<% } %>
<html>
    <title>Black Belt Class Signup</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        * {
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        }
        html {
            background-image: linear-gradient(#0095ff, #9ed7ff);
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
        }
        h1 {
            text-align: center;
        }
        body {
            font-size: 16px;
        }
        #footer {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 2.5rem;            /* Footer height */
        }
        p, li {
            font-size: 14px;
        }
        form > div {
            margin-bottom: 20px;
        }
        button, label, input, select {
            display: block;
            font-size: 100%;
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            width: 100%;
            padding: 5px;
            height: 30px;
        }
        select {
            -webkit-appearance: none;
            appearance: none;
        }
        .select-wrapper {
            position: relative;
        }
        .select-wrapper::after {
            content: "â–¼";
            font-size: 1rem;
            top: 6px;
            right: 10px;
            position: absolute;
        }
        input[type="text"], [type="first name"], [type="last name"], [type="email"], select {
            box-shadow: inset 1px 1px 3px #ccc;
            border-radius: 5px;
        }
        label {
            margin-bottom: 5px;
            font-size: 20px;
        }
        button {
            width: 60%;
            margin: 0 auto;
        }
        label{
            font-weight: bold;
        }
    </style>
    <head>
        <h1>Black Belt Class Signup</h1>
        <p>One person per signup please.</p>
        <p>Black Belt class times are available at the school at the below times. There are only 25 spots available for each class slot, so only class times with available slots are shown.</p>
        <p>*If you are not comfortable with attending class at the school, Virtual Karate will be held from during the same times via Zoom.</p>
        <p>*Please be aware of the following rules for in-person class:</p>
        <ul>
            <li>You must already be in your uniform when you arrive at the school.</li>
            <li>Use of the restrooms is currently prohibited.</li>
            <li>Shoes must be taken off and placed on the shoe rack by the door.</li>
            <li>Hand sanitizer must be used before and after class.</li>
            <li>Parents must remain outside the class and can watch the class from Zoom.</li>
            <li>Masks must be worn on the way into and out of the school.</li>
            <li>Temperatures will be taken before sparring class on Thursdays.</li>
        </ul>
        <p><strong>BLACK BELT CLASS TIMES</strong></p>
        <ul>
            <li>Tuesdays
            <ul>
                <li>7:00 PM - 7:30 PM</li>
            </ul>
            </li>
            <li>Wednesdays
            <ul>
                <li>7:00 PM - 7:30 PM</li>
            </ul>
            </li>
            <li>Thursdays <b>(Sparring Night, Bring Your Gear)</b>
            <ul>
                <li>7:00 PM - 7:30 PM</li>
            </ul>
            </li>
        </ul>
        <p><strong>** Class at the Park **</strong></p>
        <p>August 21st from 6:15 PM to 6:45 PM. Signup is not necessary.</p>
        <p><strong>** Board Breaking Workshop **</strong></p>
        <p>August 27th at 7:00 PM. Signup <a href="/store/board_breaking">here</a> or on the app!</p><br>
        <p><strong>BLACK BELT CLASS TIMES (STARTS SEPTEMBER 8TH)</strong></p>
        <ul>
            <li>Mondays
            <ul>
                <li>7:30 PM - 8:15 PM</li>
            </ul>
            </li>
            <li>Wednesdays
            <ul>
                <li>7:30 PM - 8:00 PM</li>
            </ul>
            </li>
            <li>Fridays <b>(Sparring Night, Bring Your Gear)</b>
            <ul>
                <li>7:30 PM - 8:15 PM</li>
            </ul>
            </li>
        </ul>
    </head>
    <body>
        <form onsubmit="return ValidateForm()" name="Form" action="/store/1degree_signup" method="POST">
            <div><label for="fname">First Name: </label><input type="first name" name="fname" id="fname" pattern="[A-z]{1}[A-z ]+" value="<%= fname %>" placeholder="First Name" required></div><br>
            <div><label for="lname">Last Name: </label><input type="last name" name="lname" id="lname" pattern="[A-z]{1}[A-z ]+" value="<%= lname %>" placeholder="Last Name" required></div><br>
            <div><label for="email">Email: </label><input type="email" name="email" id="email" pattern="[A-z0-9.]+[@][A-z0-9]{1,}[.]+[A-z]{2,}" value="<%= email %>" placeholder="Email" required><br>
            <label for="day_time">Class Days and Times:</label>
            <% if (data) {%>
                <% data.forEach(function(item){ %>
                    <pre>   <input type="checkbox" class="check" id="day_time" name="day_time" value="<%= item.id %>"><%= item.month_name %> <%= item.day_number %> at <%= item.time_num %> (<%= 25 - item.count %> spot(s) remaining).</pre>
                <% }) %>
            <% } %>
            <div><input type="submit" name="Submit" value="Submit"/></div>
        </form>
        <p style="font-style:italic;">You can now select up to <strong>4</strong> classes when signing up!</p>
    </body>
</html>
<script>
    var checks = document.querySelectorAll(".check");
    var max = 4;
    for (var i = 0; i < checks.length; i++){
        checks[i].onclick = selectiveCheck;
    }
    function selectiveCheck (event) {
        var checkedChecks = document.querySelectorAll(".check:checked");
        if (checkedChecks.length >= max + 1){
            alert('Maximum of 4 classes per signup please.');
            return false;
        }
    }
    function ValidateForm(){
        var fname = document.getElementById('fname');
        var lname = document.getElementById('lname');
        var email = document.getElementById('email');
        var choice = document.getElementById('day_time');
        if (fname == null || fname == ""){
            alert("First name is required and must contain at least two letters.");
            return false;
        }
        if (lname == null || lname == ""){
            alert("Last name is required and must contain at least two letters.");
            return false;
        }
        if (email == null || email == ""){
            alert("An email is required. We use this in case we need to contact you.");
            return false;
        }
        if (choice == null || choice == ""){
            alert("Please select a day and time.");
            return false;
        }
        return true;
    }
</script>
